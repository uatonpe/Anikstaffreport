<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>कर्मचारी कामगिरी अहवाल</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;600&display=swap" rel="stylesheet">
<style>
    :root {
        --primary-bg: #f4f7fc; --card-bg: #ffffff; --header-bg: #0d47a1; --primary-color: #1976d2; --accent-color: #42a5f5; --text-dark: #2c3e50; --text-light: #566573; --border-color: #e0e0e0; --shadow: 0 4px 20px rgba(0, 0, 0, 0.05); --positive-color: #27ae60; --negative-color: #e74c3c; --neutral-color: #f39c12; --highlight-bg: #e3f2fd;
    }
    body { font-family: 'Inter', 'Noto Sans Devanagari', sans-serif; background: var(--primary-bg); margin: 0; color: var(--text-dark); }
    .loader { display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column; gap: 15px; }
    .spinner { border: 4px solid rgba(0,0,0,0.1); width: 36px; height: 36px; border-radius: 50%; border-left-color: var(--primary-color); animation: spin 1s ease infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    header { background: var(--header-bg); padding: 20px 30px; color: white; text-align: center; font-size: 24px; font-weight: 600; }
    .main-container { padding: 25px; max-width: 1600px; margin: 0 auto; }
    .card { background: var(--card-bg); padding: 30px; border-radius: 16px; box-shadow: var(--shadow); margin-bottom: 25px; border-top: 4px solid var(--primary-color); }
    .card h3 { margin-top: 0; border-bottom: 1px solid var(--border-color); padding-bottom: 15px; margin-bottom: 25px; display: flex; align-items: center; gap: 12px; font-size: 20px; color: var(--header-bg); }
    .filters-grid, .individual-filters, .calendar-filters { display: grid; gap: 20px; align-items: flex-end; }
    .filters-grid { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
    .individual-filters { grid-template-columns: 2fr 1fr; }
    .calendar-filters { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
    .filter-group { display: flex; flex-direction: column; gap: 8px; }
    label { font-weight: 600; font-size: 14px; color: var(--text-light); }
    input[type="date"], select, button { border: 1px solid var(--border-color); padding: 12px 15px; border-radius: 8px; font-family: 'Inter', 'Noto Sans Devanagari', sans-serif; font-size: 15px; width: 100%; box-sizing: border-box; transition: all 0.2s ease; }
    input:focus, select:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.2); }
    button { background-color: var(--primary-color); color: white; border: none; font-weight: 600; cursor: pointer; }
    button:hover { background-color: var(--header-bg); transform: translateY(-2px); }
    #report-output { margin-top: 30px; overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; white-space: nowrap; }
    th, td { padding: 14px 18px; text-align: left; font-size: 14px; border-bottom: 1px solid var(--border-color); }
    th { background: #f8f9fa; font-weight: 600; color: var(--text-light); }
    tbody tr:nth-child(even) { background-color: #fafcff; }
    tbody tr:hover { background-color: var(--highlight-bg); }
    .text-positive { color: var(--positive-color); font-weight: 600; }
    .text-negative { color: var(--negative-color); font-weight: 600; }
    .text-neutral { color: var(--neutral-color); font-weight: 600; }
    
    /* NEW CALENDAR STYLES */
    #calendar-container { margin-top: 30px; }
    .date-grid { display: flex; flex-wrap: wrap; gap: 10px; }
    .date-box { border-radius: 8px; text-align: center; padding: 12px; font-weight: 600; border: 1px solid var(--border-color); flex: 1 0 120px; /* Flex properties for responsive boxes */ }
    .date-box .day-of-week { font-size: 12px; color: var(--text-light); font-weight: 500; }
    .date-box .date-number { font-size: 16px; display: block; margin-top: 4px; }
    .reported { background-color: #e6f9f0; color: var(--positive-color); border-color: #a3e9c1; cursor: pointer; transition: transform 0.2s; }
    .reported:hover { transform: scale(1.05); box-shadow: var(--shadow); }
    .missed { background-color: #fff0f0; color: var(--negative-color); border-color: #f5b7b1; }

    /* Modal Styles */
    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; display: none; justify-content: center; align-items: center; }
    .modal-content { background: white; padding: 30px; border-radius: 12px; width: 90%; max-width: 700px; max-height: 85vh; overflow-y: auto; position: relative; }
    .modal-close { position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 24px; cursor: pointer; color: #888; }
    .modal-content h4 { margin-top: 0; color: var(--header-bg); }
    .report-details-list { list-style: none; padding: 0; }
    .report-details-list li { padding: 10px 0; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
    .report-details-list li:last-child { border-bottom: none; }
    .report-details-list strong { color: var(--text-light); flex-basis: 40%; }
    .report-details-list span { color: var(--text-dark); font-weight: 500; flex-basis: 55%; text-align: right; }
    
    @media (max-width: 768px) { .filters-grid, .individual-filters, .calendar-filters { grid-template-columns: 1fr; } header { font-size: 20px; } .card { padding: 20px; } .date-box { flex-basis: calc(50% - 10px); } }
</style>
</head>
<body>

<header>कर्मचारी कामगिरी अहवाल (Performance Report)</header>

<div class="main-container">
    <div id="loader" class="loader">
        <div class="spinner"></div>
        <p>संस्थेचा डेटा लोड होत आहे, कृपया प्रतीक्षा करा...</p>
    </div>

    <div id="content" style="display: none;">
        <!-- Collective Report Card -->
        <div class="card">
            <h3><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" fill="currentColor"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></